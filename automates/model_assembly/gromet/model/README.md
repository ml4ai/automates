## Instructions

The following are instructions for updating the GroMEt Schema data model.

The contents of this directory are autogenerated using the swagger-codegen. 
See the instructions in the description at the top of the `gromet_FN_v
{CURRENT_VERSION}`, which can be found here:
- https://ml4ai.github.io/automates-v2/

After following steps 1-3 in the above instructions, you will now have a 
directory named `$OUTPUT_PATH` (in the instructions, this directory is 
named `client`) that contains the full implementation of the 
swagger-generated client code. We are only interested in the generated data 
model classes. The Python classes are located here: 
`$OUTPUT_PATH/swagger_client/models/`

To update the SKEMA (AutoMATES) GroMEt schema data model, do the following:

1. Place all the generated python files under 
   `$OUTPUT_PATH/swagger_client/models/`,_except_ `metadata.py`, into _this_ 
   directory, i.e.:
   `<AutoMATES>/automates/model_assembly/gromet/model/`
   Doing so will overwrite any matching files already in this directory.
   
   (Don't copy `metadata.py` because the implementation of `metadata.py` under 
   `<AutoMATES>/automates/model_assembly/gromet/metadata/` will be used as 
   the reference for the top-level Metadata class definition.)

2. When the data model code was autogenerated, swagger assumed the code 
   is in the context of swagger_client.models python path. Because we are 
   moving just the data models to a new context, this means that for module 
   inheritance we need to manually fix the module paths. In particular, the 
   import line:
      ```
      from swagger_client.models.gromet_box import GrometBox
      ```
   must be changed to:
      ```
      import GrometBox
      ```
   This change must be made manually for the following files:
   - `gromet_box_conditional.py`
   - `gromet_box_function.py`
   - `gromet_box_loop.py`

3. After copying over data models files, you can now delete `$OUTPUT_PATH` 
   directory tree (e.g.: `$ rm -rf client`).
   And if you are updating the model in the master, you can add, commit, 
   push the updated data model files.

